package com.acme.testcode;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Scanner;
import java.util.regex.Pattern;

public final class SQLTest {

  private Connection conn;

  public ResultSet simpleIndirect() throws SQLException {
    Scanner scanner = new Scanner(System.in);
    String input = filterTable(scanner.nextLine() + "");
    String sql = "SELECT * FROM " + input;
    Statement stmt = conn.createStatement();
    return stmt.executeQuery(sql);
  }
  
  void filterTable(final String tablename) {
      var regex = Pattern.compile("[a-zA-Z0-9]+(.[a-zA-Z0-9]+)?");
      if (!regex.matcher(tablename).matches()) {
          throw new RuntimeException("Supplied table name contains non-alphanumeric characters");
      }
  }
}
